# tournament-app

### Go

Clone this repository into `$GOPATH/src` directory, by default it is located in `~/go`. Or set `$GOPATH` in your bash profile.

install dependencies:
1. `go mod tidy`
2. `go mod vendor`

run server:
`go run cmd/tournament-service/main.go` or `make run`

build:
`go build ./cmd/tournament-service` or `make binary`

you can change environment variables in `.env`.
env sample:
```
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/tournament
# optional, default: postgresql://postgres:postgres@localhost:5432/tournament
```

### Postgres
create database named `tournament` and run script `build/sql/ddl.sql`

### Front(Optional if modifying js is planned)
1. `npm install` <=== install dependencies

2. `npm run build` <=== builds react app as minified js and css or `make front`


### Docker
1. `docker compose -f docker-compose.yml up -d` to start containers or `make compose`

2. `docker compose -f docker-compose.yml down` to stop containers or `-v` with deleting volumes option

run `docker ps` to see if dependant db container exists(generated by docker-compose) with port forwarding 5432 of container db into machine 5433(thus you will able to access by localhost:5433 the container db and do not conflict with your machine postgres)

### Unit tests
run `go test -v ./...` or `make test` in root folder, make sure that you have running docker db container

### Makefile
run `make compose` docker compose starting containers

run `make run` local development

run `make binary` generates golang binary

run `make front` reactjs compilation and preparing dist files

run `make test` for tests

### Browser
`http://localhost:3001` for docker

`http://localhost:8080` for local development

why? Probably because port 8080 is in use, it is popular port, the same goes to postgres 5433 instead of standart 5432, the main reason is to use probably free port.


### Screenshots
![Teams generation](readme/a.png)
![Teams generated](readme/b.png)
![Division](readme/c.png)
![Playoff](readme/d.png)
![Cleanup](readme/e.png)
![Docker](readme/f.png)
![Division warning](readme/g.png)
![Division prepared](readme/h.png)
![Playoff warning](readme/i.png)
![Playoff quarter final pre-prepare, top 4 teams from divisions](readme/j.png)